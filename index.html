<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reactor Arc</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }

        .background-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 217, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 217, 255, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
            pointer-events: none;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            z-index: 1;
        }

        .arc-reactor {
            position: relative;
            width: 300px;
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s ease;
        }

        .core {
            position: absolute;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #00d9ff 0%, #0066ff 50%, #003d99 100%);
            border-radius: 50%;
            box-shadow: 
                0 0 40px #00d9ff,
                0 0 80px #0066ff,
                0 0 120px #003d99,
                inset 0 0 20px #00d9ff;
            animation: pulse 2s ease-in-out infinite;
            z-index: 10;
        }

        .ring {
            position: absolute;
            border-radius: 50%;
            border: 3px solid #00d9ff;
            box-shadow: 
                0 0 20px #00d9ff,
                inset 0 0 20px #0066ff;
            will-change: transform;
        }

        .ring-1 {
            width: 140px;
            height: 140px;
            animation: rotate 4s linear infinite;
        }

        .ring-2 {
            width: 200px;
            height: 200px;
            animation: rotate 6s linear infinite reverse;
        }

        .ring-3 {
            width: 260px;
            height: 260px;
            animation: rotate 8s linear infinite;
        }

        .blade {
            position: absolute;
            width: 4px;
            height: 100px;
            background: linear-gradient(to bottom, transparent 0%, #00d9ff 50%, transparent 100%);
            box-shadow: 0 0 10px #00d9ff;
            transform-origin: center;
            will-change: transform;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #00d9ff;
            border-radius: 50%;
            box-shadow: 0 0 10px #00d9ff;
            animation: float 3s ease-in-out forwards;
            will-change: transform, opacity;
        }

        .outer-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid rgba(0, 217, 255, 0.3);
        }

        .segment {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-origin: center;
        }

        .segment::before {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background: #00d9ff;
            border-radius: 50%;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 15px #00d9ff;
        }

        .controls {
            display: flex;
            gap: 20px;
            z-index: 100;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 12px 30px;
            background: linear-gradient(135deg, #00d9ff 0%, #0066ff 100%);
            border: 2px solid #00d9ff;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(0, 217, 255, 0.8);
        }

        button:active {
            transform: translateY(0);
        }

        .power-off {
            opacity: 0.3;
        }

        .power-off .core,
        .power-off .ring,
        .power-off .blade,
        .power-off .segment::before {
            animation-play-state: paused;
            opacity: 0.2;
        }

        .stats-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(10, 10, 10, 0.8);
            border: 2px solid #00d9ff;
            border-radius: 10px;
            padding: 20px;
            min-width: 200px;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.3);
        }

        .stat {
            margin: 10px 0;
            color: #00d9ff;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stat-label {
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-weight: bold;
            font-size: 16px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(0, 217, 255, 0.2);
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d9ff, #0066ff);
            border-radius: 4px;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px #00d9ff;
        }

        .energy-bolt {
            position: absolute;
            width: 2px;
            background: linear-gradient(to bottom, #00d9ff, transparent);
            box-shadow: 0 0 8px #00d9ff;
            animation: bolt 0.5s ease-out forwards;
            will-change: transform, opacity;
        }

        .info {
            color: #00d9ff;
            font-size: 18px;
            text-align: center;
            text-shadow: 0 0 10px #00d9ff;
            letter-spacing: 2px;
        }

        .diagnostics-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(10, 10, 10, 0.8);
            border: 2px solid #00d9ff;
            border-radius: 10px;
            padding: 15px;
            min-width: 250px;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.3);
        }

        .diagnostics-panel h3 {
            color: #00d9ff;
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .diagnostic-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 8px 0;
            font-size: 12px;
            color: #00d9ff;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
            animation: blink 2s ease-in-out infinite;
        }

        .status-indicator.warning {
            background: #ffaa00;
            box-shadow: 0 0 10px #ffaa00;
        }

        .status-indicator.critical {
            background: #ff0000;
            box-shadow: 0 0 10px #ff0000;
        }

        .wave-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            overflow: hidden;
            pointer-events: none;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(ellipse at center, rgba(0, 217, 255, 0.1) 0%, transparent 70%);
            transform: translateX(-50%);
            animation: wave 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 
                    0 0 40px #00d9ff,
                    0 0 80px #0066ff,
                    0 0 120px #003d99,
                    inset 0 0 20px #00d9ff;
            }
            50% {
                transform: scale(1.1);
                box-shadow: 
                    0 0 60px #00d9ff,
                    0 0 100px #0066ff,
                    0 0 140px #003d99,
                    inset 0 0 30px #00d9ff;
            }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes float {
            0% {
                transform: translateY(0) scale(1);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: translateY(-150px) scale(0);
                opacity: 0;
            }
        }

        @keyframes bolt {
            from {
                height: 0;
                opacity: 1;
            }
            to {
                height: 100px;
                opacity: 0;
            }
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes wave {
            0%, 100% {
                transform: translateX(-50%) scale(1);
                opacity: 0.3;
            }
            50% {
                transform: translateX(-50%) scale(1.1);
                opacity: 0.6;
            }
        }

        @media (max-width: 768px) {
            .arc-reactor {
                width: 250px;
                height: 250px;
            }
            
            .stats-panel,
            .diagnostics-panel {
                position: relative;
                margin: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="background-grid"></div>
    <div class="wave-container">
        <div class="wave"></div>
    </div>

    <div class="stats-panel">
        <div class="stat">
            <span class="stat-label">Energía:</span>
            <span class="stat-value" id="energy">100%</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="energyBar" style="width: 100%"></div>
        </div>
        <div class="stat">
            <span class="stat-label">Temperatura:</span>
            <span class="stat-value" id="temp">25°C</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="tempBar" style="width: 25%"></div>
        </div>
        <div class="stat">
            <span class="stat-label">Salida:</span>
            <span class="stat-value" id="output">3.0 GJ/s</span>
        </div>
        <div class="stat">
            <span class="stat-label">Estado:</span>
            <span class="stat-value" id="status">ÓPTIMO</span>
        </div>
        <div class="stat">
            <span class="stat-label">Uptime:</span>
            <span class="stat-value" id="uptime">00:00</span>
        </div>
    </div>

    <div class="diagnostics-panel">
        <h3>⚡ Diagnósticos</h3>
        <div class="diagnostic-item">
            <div class="status-indicator" id="coreStatus"></div>
            <span>Núcleo del Reactor</span>
        </div>
        <div class="diagnostic-item">
            <div class="status-indicator" id="coolantStatus"></div>
            <span>Sistema de Enfriamiento</span>
        </div>
        <div class="diagnostic-item">
            <div class="status-indicator" id="stabilityStatus"></div>
            <span>Estabilidad Magnética</span>
        </div>
        <div class="diagnostic-item">
            <div class="status-indicator" id="shieldStatus"></div>
            <span>Blindaje de Contención</span>
        </div>
    </div>

    <div class="container">
        <div class="arc-reactor" id="reactor">
            <div class="core"></div>
            <div class="ring ring-1"></div>
            <div class="ring ring-2"></div>
            <div class="ring ring-3"></div>
            <div class="outer-ring" id="outerRing"></div>
        </div>
        <div class="info" id="info">REACTOR ARC - ACTIVO</div>
        <div class="controls">
            <button onclick="togglePower()">ENCENDER/APAGAR</button>
            <button onclick="boost()">SOBRECARGA</button>
            <button onclick="stabilize()">ESTABILIZAR</button>
        </div>
    </div>

    <script>
        const reactor = document.getElementById('reactor');
        const info = document.getElementById('info');
        const outerRing = document.getElementById('outerRing');
        const energyEl = document.getElementById('energy');
        const energyBar = document.getElementById('energyBar');
        const tempEl = document.getElementById('temp');
        const tempBar = document.getElementById('tempBar');
        const outputEl = document.getElementById('output');
        const statusEl = document.getElementById('status');
        const uptimeEl = document.getElementById('uptime');
        
        let isPowered = true;
        let isBoosting = false;
        let energy = 100;
        let temperature = 25;
        let output = 3;
        let startTime = Date.now();
        let particlePool = [];
        let boltPool = [];
        const MAX_PARTICLES = 20;
        const MAX_BOLTS = 10;

        // Crear aspas del reactor
        for (let i = 0; i < 8; i++) {
            const blade = document.createElement('div');
            blade.className = 'blade';
            blade.style.transform = `rotate(${i * 45}deg)`;
            reactor.appendChild(blade);
        }

        // Crear segmentos del anillo exterior
        for (let i = 0; i < 12; i++) {
            const segment = document.createElement('div');
            segment.className = 'segment';
            segment.style.transform = `rotate(${i * 30}deg)`;
            outerRing.appendChild(segment);
        }

        // Sistema de pooling para partículas
        function getParticle() {
            if (particlePool.length > 0) {
                return particlePool.pop();
            }
            const particle = document.createElement('div');
            particle.className = 'particle';
            return particle;
        }

        function releaseParticle(particle) {
            if (particlePool.length < MAX_PARTICLES) {
                particle.remove();
                particlePool.push(particle);
            }
        }

        function getBolt() {
            if (boltPool.length > 0) {
                return boltPool.pop();
            }
            const bolt = document.createElement('div');
            bolt.className = 'energy-bolt';
            return bolt;
        }

        function releaseBolt(bolt) {
            if (boltPool.length < MAX_BOLTS) {
                bolt.remove();
                boltPool.push(bolt);
            }
        }

        // Actualizar diagnósticos
        function updateDiagnostics() {
            const coreStatus = document.getElementById('coreStatus');
            const coolantStatus = document.getElementById('coolantStatus');
            const stabilityStatus = document.getElementById('stabilityStatus');
            const shieldStatus = document.getElementById('shieldStatus');

            if (!isPowered) {
                [coreStatus, coolantStatus, stabilityStatus, shieldStatus].forEach(el => {
                    el.className = 'status-indicator';
                    el.style.background = '#666';
                    el.style.boxShadow = 'none';
                });
                return;
            }

            // Núcleo del reactor
            coreStatus.className = energy > 50 ? 'status-indicator' : 'status-indicator warning';
            if (energy < 30) coreStatus.className = 'status-indicator critical';

            // Sistema de enfriamiento
            coolantStatus.className = temperature < 60 ? 'status-indicator' : 'status-indicator warning';
            if (temperature > 80) coolantStatus.className = 'status-indicator critical';

            // Estabilidad magnética
            stabilityStatus.className = isBoosting ? 'status-indicator warning' : 'status-indicator';

            // Blindaje
            shieldStatus.className = 'status-indicator';
        }

        // Actualizar uptime
        function updateUptime() {
            if (!isPowered) return;
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            uptimeEl.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        // Actualizar estadísticas (optimizado)
        let lastUpdate = Date.now();
        function updateStats() {
            const now = Date.now();
            const delta = (now - lastUpdate) / 1000;
            lastUpdate = now;

            if (isPowered && !isBoosting) {
                energy = Math.max(60, energy - 0.1 * delta);
                temperature = Math.min(100, 25 + (100 - energy) * 0.3);
                output = 3 + (100 - energy) * 0.02;
            } else if (!isPowered) {
                energy = Math.min(100, energy + 0.2 * delta);
                temperature = Math.max(25, temperature - 0.3 * delta);
                output = 0;
            }

            energyEl.textContent = Math.round(energy) + '%';
            energyBar.style.width = energy + '%';
            tempEl.textContent = Math.round(temperature) + '°C';
            tempBar.style.width = (temperature / 100 * 100) + '%';
            outputEl.textContent = output.toFixed(1) + ' GJ/s';
            
            if (!isPowered) {
                statusEl.textContent = 'APAGADO';
                statusEl.style.color = '#666';
            } else if (temperature > 80) {
                statusEl.textContent = 'CRÍTICO';
                statusEl.style.color = '#ff0000';
            } else if (temperature > 60) {
                statusEl.textContent = 'ALERTA';
                statusEl.style.color = '#ffaa00';
            } else {
                statusEl.textContent = 'ÓPTIMO';
                statusEl.style.color = '#00d9ff';
            }

            updateDiagnostics();
            updateUptime();
        }

        setInterval(updateStats, 100);

        // Crear rayo de energía optimizado
        function createBolt() {
            const bolt = getBolt();
            const angle = Math.random() * Math.PI * 2;
            const distance = 60;
            const x = Math.cos(angle) * distance;
            const y = Math.sin(angle) * distance;
            bolt.style.left = `calc(50% + ${x}px)`;
            bolt.style.top = `calc(50% + ${y}px)`;
            bolt.style.transform = `rotate(${angle}rad)`;
            reactor.appendChild(bolt);
            
            setTimeout(() => releaseBolt(bolt), 500);
        }

        // Crear partículas flotantes optimizado
        function createParticle() {
            const particle = getParticle();
            const angle = Math.random() * Math.PI * 2;
            const distance = Math.random() * 80 + 40;
            const x = Math.cos(angle) * distance;
            const y = Math.sin(angle) * distance;
            particle.style.left = `calc(50% + ${x}px)`;
            particle.style.top = `calc(50% + ${y}px)`;
            particle.style.animationDelay = `${Math.random() * 2}s`;
            reactor.appendChild(particle);
            
            setTimeout(() => releaseParticle(particle), 3000);
        }

        // Usar requestAnimationFrame para mejor rendimiento
        let lastParticleTime = 0;
        function particleLoop(timestamp) {
            if (isPowered && timestamp - lastParticleTime > 200) {
                createParticle();
                if (Math.random() > 0.7) createBolt();
                lastParticleTime = timestamp;
            }
            requestAnimationFrame(particleLoop);
        }
        requestAnimationFrame(particleLoop);

        function togglePower() {
            isPowered = !isPowered;
            reactor.classList.toggle('power-off');
            info.textContent = isPowered ? 'REACTOR ARC - ACTIVO' : 'REACTOR ARC - INACTIVO';
            
            if (isPowered) {
                startTime = Date.now();
            }
        }

        function boost() {
            if (!isPowered || isBoosting) return;
            
            isBoosting = true;
            info.textContent = 'SOBRECARGA ACTIVADA';
            reactor.style.filter = 'brightness(2) saturate(1.5)';
            
            temperature += 30;
            output = 15;
            energy = Math.max(40, energy - 20);
            
            const boostInterval = setInterval(() => {
                for (let i = 0; i < 5; i++) {
                    createParticle();
                    createBolt();
                }
            }, 50);
            
            setTimeout(() => {
                clearInterval(boostInterval);
                reactor.style.filter = 'brightness(1) saturate(1)';
                info.textContent = 'REACTOR ARC - ACTIVO';
                isBoosting = false;
            }, 2000);
        }

        function stabilize() {
            if (!isPowered) return;
            
            info.textContent = 'ESTABILIZANDO SISTEMAS...';
            temperature = Math.max(25, temperature - 20);
            energy = Math.min(100, energy + 15);
            
            setTimeout(() => {
                info.textContent = 'SISTEMAS ESTABILIZADOS';
                setTimeout(() => {
                    info.textContent = 'REACTOR ARC - ACTIVO';
                }, 1500);
            }, 1000);
        }

        // Efecto de resplandor al mover el mouse (con throttle)
        let lastMouseMove = 0;
        document.addEventListener('mousemove', (e) => {
            const now = Date.now();
            if (now - lastMouseMove < 50) return;
            lastMouseMove = now;

            if (!isPowered) return;
            const rect = reactor.getBoundingClientRect();
            const x = e.clientX - rect.left - rect.width / 2;
            const y = e.clientY - rect.top - rect.height / 2;
            const distance = Math.sqrt(x * x + y * y);
            
            if (distance < 200) {
                const intensity = 1 + (1 - distance / 200) * 0.5;
                reactor.style.filter = `brightness(${intensity})`;
            } else {
                reactor.style.filter = 'brightness(1)';
            }
        });

        // Efecto de escala al hacer hover
        reactor.addEventListener('mouseenter', () => {
            reactor.style.transform = 'scale(1.05)';
        });

        reactor.addEventListener('mouseleave', () => {
            reactor.style.transform = 'scale(1)';
        });
    </script>
</body>
</html>
